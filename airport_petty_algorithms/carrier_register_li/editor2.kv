#:kivy 2.1.0
#:import Factory kivy.factory.Factory

Root:
    
    id: file_widget

    BoxLayout:
        orientation: "vertical"
        size: 800, 600
        padding: 5
        spacing: 10
        
        canvas.before:
            Color:
                rgba: (83/255, 83/255, 83/255, 1)
            Rectangle:
                size: self.size

        RstDocument:
            id: my_file
            _source: ""
            # font_size: 35
            # text_size: cm(6), cm(4)
            text: my_file._source
            # text: str(''.join(list(file_chooser.selection)))
            text_size: 50
            show_errors: True
            
        FileChooserListView:
            id: file_chooser
            on_selection: root.select(file_chooser.selection)
            # background_color: 0, 0, 0, 1
            # padding: 10
            # spacing: 10
            size: (600, 600)

            # Label:
            #     color: (0, 1, 0, 1)
        MDRaisedButton:
            id: my_button
            text: "Select File"
            # on_release:
            #     print('This is file_chooser')
            #     file_widget.select(file_chooser.selection)
            on_press:
                # print('This is file_chooser')
                # root.get_file(file_chooser.selection)
                # print(file_chooser.selection)
                root.process_initial()
                # root.show_load()

<LoadDialog>:
    id: dialog_widget
    BoxLayout:
        orientation: "vertical"
        size: 800, 600
        padding: 5
        spacing: 10
        
        canvas.before:
            Color:
                rgba: (83/255, 83/255, 83/255, 1)
            Rectangle:
                size: self.size

        RstDocument:
            id: my_file
            _source: ""
            # font_size: 35
            # text_size: cm(6), cm(4)
            text: my_file._source
            # text: str(''.join(list(file_chooser.selection)))
            text_size: 50
            show_errors: True
            
        FileChooserListView:
            id: file_chooser
            on_selection: root.select(file_chooser.selection)
            # background_color: 0, 0, 0, 1
            # padding: 10
            # spacing: 10
            size: (600, 600)

            # Label:
            #     color: (0, 1, 0, 1)
        MDRaisedButton:
            id: my_button
            text: "Select File"
            # on_release:
            #     print('This is file_chooser')
            #     file_widget.select(file_chooser.selection)
            on_press:
                # print('This is file_chooser')
                # root.get_file(file_chooser.selection)
                # print(file_chooser.selection)
                
                # root.process_final() == dialog_widget.process_final()
                ##dialog_widget.process_final() ## second pop_up
                #X# root.new_layer()
                dialog_widget.new_layer()

<MainPage>:

    id: main_page
    fuel_type1: "RT"
    fuel_type2: "Jet A-1"

    BoxLayout:
        orientation: "vertical"
        size: 800, 600
        padding: 5
        spacing: 10
        
        canvas.before:
            Color:
                rgba: (83/255, 83/255, 83/255, 1)
            Rectangle:
                size: self.size
        
        Image:
            id: my_image
            source: ""
            # source: "/media/netunit/storage/SoftServeItAcademy/airport_petty_algorithms/carrier_register_li/jet-a-1-sticker.jpg"
            # size: self.size
        RstDocument:
            id: fuel_selection
            # size_hint: (1, 0.5)
            # pos_hint: {'center_x': .30, 'center_y': .30}
            _source: ""
            text: fuel_selection._source

        MDRaisedButton:
            id: fuel_type1
            text: "RT"

            on_press:
                main_page.select_fuel(main_page.fuel_type1)
        
        MDRaisedButton:
            id: fuel_type2
            text: "JET A-1"

            on_press:
                main_page.select_fuel(main_page.fuel_type2)